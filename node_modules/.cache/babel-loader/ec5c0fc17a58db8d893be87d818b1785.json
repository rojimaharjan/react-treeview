{"ast":null,"code":"var _jsxFileName = \"D:\\\\task\\\\JMarquardt\\\\react-treeview-demo\\\\src\\\\components\\\\Treeview.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { BsPlusCircleFill } from \"react-icons/bs\";\nimport SingleItem from './SingleItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Treeview() {\n  _s();\n\n  const [nodesList, setNodeList] = useState([]);\n  const [title, setTitle] = useState(true);\n  useEffect(() => {\n    const nodesList = [];\n    setNodeList(nodesList);\n  }, []);\n\n  const onEdit = (newTitle, currentItem) => {\n    const newNodes = nodesList.slice();\n    const currentNode = findNode(currentItem.title, currentItem.level, currentItem);\n    currentNode.title = newTitle;\n    setNodeList(newNodes);\n  };\n\n  const onDelete = currentItem => {\n    let newNodes = nodesList.slice();\n    let currentNode = findNode(currentItem.title, currentItem.level, currentItem);\n    let strCurrentNode = JSON.stringify(currentNode);\n    const strNewNodes = JSON.stringify(newNodes);\n    let removedArray = strNewNodes.replace(strCurrentNode, \"\"); // removing dangling commas if any !!!\n\n    removedArray = removedArray.replace(',,', ',');\n    removedArray = removedArray.replace(',]', ']');\n    removedArray = removedArray.replace('[,', '[');\n    newNodes = JSON.parse(removedArray);\n    setNodeList(newNodes);\n  };\n\n  const onAddChild = currentItem => {\n    const newNodes = nodesList.slice();\n    const noOfChildren = currentItem.child.length;\n    const newChild = {\n      'title': `${currentItem.title}.${noOfChildren}`,\n      'child': [],\n      'level': currentItem.level + 1,\n      'showChild': true\n    };\n    const currentNode = findNode(currentItem.title, currentItem.level, currentItem);\n    currentNode.child.push(newChild);\n    currentNode.showChild = true;\n    setNodeList(newNodes);\n  };\n\n  const onAddParent = () => {\n    const newNodes = nodesList.slice();\n    const newChild = {\n      'title': `A`,\n      'child': [],\n      'level': 0,\n      'showChild': true\n    };\n    const lastChild = newNodes.slice(-1)[0];\n\n    if (lastChild) {\n      newChild.title = `${newChild.title}${lastChild.title}`;\n    }\n\n    newNodes.push(newChild);\n    setNodeList(newNodes);\n  }; // HELPER METHODS\n\n\n  const findNode = (title, level, currentNode) => {\n    let i, currentChild, result;\n\n    if (title === currentNode.title && level === currentNode.level) {\n      return currentNode;\n    } else {\n      for (i = 0; i < currentNode.child.length; i += 1) {\n        currentChild = currentNode.child[i];\n        result = findNode(title, level, currentChild);\n\n        if (result !== false) {\n          return result;\n        }\n      }\n\n      return false;\n    }\n  };\n\n  const toggleShowChildren = currentItem => {\n    const newNodes = nodesList.slice();\n    const currentNode = findNode(currentItem.title, currentItem.level, currentItem);\n    currentNode.showChild = !currentNode.showChild;\n    setNodeList(newNodes);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: nodesList,\n        onChange: e => setNodeList(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), \" \\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: onAddParent,\n        children: /*#__PURE__*/_jsxDEV(BsPlusCircleFill, {\n          className: \"large-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), nodesList && nodesList.length > 0 && nodesList.map((item, index) => /*#__PURE__*/_jsxDEV(SingleItem, {\n      currentItem: item,\n      title: item.title,\n      onEdit: (newTitle, item) => onEdit(newTitle, item),\n      onDelete: onDelete,\n      onAddChild: item => onAddChild(item, index),\n      toggleShowChildren: toggleShowChildren\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Treeview, \"uImEAArcvIO9dXQZRSciJVC2vBU=\");\n\n_c = Treeview;\nexport default Treeview;\n\nvar _c;\n\n$RefreshReg$(_c, \"Treeview\");","map":{"version":3,"sources":["D:/task/JMarquardt/react-treeview-demo/src/components/Treeview.js"],"names":["React","useEffect","useState","BsPlusCircleFill","SingleItem","Treeview","nodesList","setNodeList","title","setTitle","onEdit","newTitle","currentItem","newNodes","slice","currentNode","findNode","level","onDelete","strCurrentNode","JSON","stringify","strNewNodes","removedArray","replace","parse","onAddChild","noOfChildren","child","length","newChild","push","showChild","onAddParent","lastChild","i","currentChild","result","toggleShowChildren","e","target","value","map","item","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { BsPlusCircleFill } from \"react-icons/bs\"\nimport SingleItem from './SingleItem'\n\nfunction Treeview() {\n  const [nodesList, setNodeList] = useState([]);\n  const [title, setTitle] = useState(true)\n\n  useEffect(() => {\n    const nodesList = []\n    setNodeList(nodesList);\n  }, [])\n\n  const onEdit = (newTitle, currentItem) => {\n    const newNodes = nodesList.slice()\n    const currentNode = findNode(currentItem.title, currentItem.level, currentItem)\n    currentNode.title = newTitle\n    setNodeList(newNodes)\n  }\n\n  const onDelete = (currentItem) => {\n    let newNodes = nodesList.slice()\n    let currentNode = findNode(currentItem.title, currentItem.level, currentItem)\n\n    let strCurrentNode = JSON.stringify(currentNode)\n    const strNewNodes = JSON.stringify(newNodes)\n\n    let removedArray = strNewNodes.replace(strCurrentNode, \"\")\n    \n    // removing dangling commas if any !!!\n    removedArray = removedArray.replace(',,', ',')\n    removedArray = removedArray.replace(',]', ']')\n    removedArray = removedArray.replace('[,', '[')\n\n    newNodes = JSON.parse(removedArray)\n    setNodeList(newNodes)\n\n  }\n\n  const onAddChild = (currentItem) => {\n    const newNodes = nodesList.slice()\n    const noOfChildren = currentItem.child.length\n    const newChild = { 'title': `${currentItem.title}.${noOfChildren}`, 'child': [], 'level': currentItem.level + 1, 'showChild': true }\n    const currentNode = findNode(currentItem.title, currentItem.level, currentItem)\n    currentNode.child.push(newChild)\n    currentNode.showChild = true\n    setNodeList(newNodes)\n  }\n\n  const onAddParent = () => {\n    const newNodes = nodesList.slice()\n    const newChild = { 'title': `A`, 'child': [], 'level': 0, 'showChild': true }\n    const lastChild = newNodes.slice(-1)[0]\n    if (lastChild) {\n      newChild.title = `${newChild.title}${lastChild.title}`\n    }\n    newNodes.push(newChild)\n    setNodeList(newNodes)\n  }\n\n  // HELPER METHODS\n  const findNode = (title, level, currentNode) => {\n    let i, currentChild, result\n\n    if (title === currentNode.title && level === currentNode.level) {\n      return currentNode\n    } else {\n      for (i = 0; i < currentNode.child.length; i += 1) {\n        currentChild = currentNode.child[i]\n        result = findNode(title, level, currentChild)\n        if (result !== false) {\n          return result\n        }\n      }\n      return false\n    }\n  }\n\n  const toggleShowChildren = (currentItem) => {\n    const newNodes = nodesList.slice()\n    const currentNode = findNode(currentItem.title, currentItem.level, currentItem)\n    currentNode.showChild = !currentNode.showChild\n    setNodeList(newNodes)\n  }\n\n  return (\n    <div>\n      {/* <h6>\n        Click to add &nbsp;\n            <span onClick={onAddParent}>\n          <BsPlusCircleFill className=\"large-icon\" />\n        </span>\n      </h6> */}\n\n      <h6>\n        <input type=\"text\" value={nodesList} onChange ={(e) => setNodeList(e.target.value)}/> &nbsp;\n            <span onClick={onAddParent}>\n          <BsPlusCircleFill className=\"large-icon\" />\n        </span>\n        </h6>\n      {\n        (nodesList && nodesList.length > 0) &&\n        nodesList.map((item, index) =>\n          <SingleItem\n            key={index}\n            currentItem={item}\n            title={item.title}\n            onEdit={(newTitle, item) => onEdit(newTitle, item)}\n            onDelete={onDelete}\n            onAddChild={(item) => onAddChild(item, index)}\n            toggleShowChildren={toggleShowChildren}\n          />\n        )\n      }\n\n    </div>\n  )\n}\n\nexport default Treeview\n"]},"metadata":{},"sourceType":"module"}